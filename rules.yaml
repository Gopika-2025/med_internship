# rules.yaml
# Compatible with the current pipeline:
# - general_rules.red_flags (list of regex/words)
# - diseases[].name
# - diseases[].keywords (simple word/phrase matches)
# - diseases[].severity_rules.red_flags (extra triggers)
# - diseases[].procedures (plain strings)
# - diseases[].recovery_recos (plain strings)
# - diseases[].cost_band.tier_1/2/3 (INR [min,max])

general_rules:
  red_flags:
    - "sepsis"
    - "septic shock"
    - "hypotension"
    - "loss of consciousness"
    - "altered sensorium"
    - "acute abdomen"
    - "profuse bleeding"
    - "chest pain"
    - "shortness of breath"
    - "stroke"
    - "severe dehydration"
    - "uncontrolled fever"
    - "intractable vomiting"
    - "fracture with deformity"
    - "neuro deficit"
    - "severe head injury"
    - "GI perforation"
    - "peritonitis"

diseases:
  - name: "Appendicitis"
    keywords: ["appendix", "appendicitis", "RLQ pain", "right lower quadrant pain", "McBurney"]
    severity_rules:
      red_flags: ["perforated", "abscess", "peritonitis", "generalized guarding"]
    procedures:
      - "Laparoscopic appendectomy"
      - "Open appendectomy (if indicated)"
    recovery_recos:
      - "Nil per oral until surgical advice; IV fluids as per clinician"
      - "Early ambulation post-op per advice"
      - "Avoid heavy lifting for 2â€“3 weeks"
    cost_band:
      tier_1: [60000, 90000]
      tier_2: [40000, 70000]
      tier_3: [30000, 50000]

  - name: "Gallstones / Cholelithiasis"
    keywords: ["gallstones", "cholelithiasis", "biliary colic", "gallbladder"]
    severity_rules:
      red_flags: ["cholangitis", "bile duct obstruction", "pancreatitis", "empyema"]
    procedures:
      - "Laparoscopic cholecystectomy"
      - "ERCP (if CBD stones, per specialist)"
    recovery_recos:
      - "Low-fat diet"
      - "Gradual return to activity in ~2 weeks"
    cost_band:
      tier_1: [70000, 110000]
      tier_2: [50000, 85000]
      tier_3: [35000, 65000]

  - name: "Inguinal Hernia"
    keywords: ["inguinal hernia", "groin bulge", "reducible swelling groin"]
    severity_rules:
      red_flags: ["strangulation", "irreducible hernia", "obstruction"]
    procedures:
      - "Laparoscopic hernioplasty (TAPP/TEP)"
      - "Open mesh hernioplasty (Lichtenstein)"
    recovery_recos:
      - "Avoid heavy lifting for 4â€“6 weeks"
      - "Use abdominal support as advised"
    cost_band:
      tier_1: [80000, 140000]
      tier_2: [60000, 100000]
      tier_3: [45000, 80000]

  - name: "Ventral/Incisional Hernia"
    keywords: ["ventral hernia", "incisional hernia", "abdominal wall hernia"]
    severity_rules:
      red_flags: ["strangulation", "skin necrosis", "obstruction"]
    procedures:
      - "Laparoscopic mesh repair"
      - "Open onlay/sublay mesh repair (as indicated)"
    recovery_recos:
      - "Weight control; avoid strain"
      - "Abdominal binder as advised"
    cost_band:
      tier_1: [120000, 220000]
      tier_2: [90000, 170000]
      tier_3: [70000, 140000]

  - name: "Knee Osteoarthritis"
    keywords: ["knee osteoarthritis", "tricompartmental oa", "degenerative knee", "kellgren", "gonarthrosis"]
    severity_rules:
      red_flags: ["severe deformity", "night pain unrelieved", "failed conservative >6 months"]
    procedures:
      - "Intra-articular injections / physiotherapy (conservative)"
      - "Unicompartmental knee replacement (selected)"
      - "Total knee replacement (advanced OA)"
    recovery_recos:
      - "Quadriceps strengthening, weight management"
      - "Assistive devices as needed"
    cost_band:
      tier_1: [180000, 350000]
      tier_2: [120000, 250000]
      tier_3: [90000, 180000]

  - name: "Kidney Stones / Ureteric Colic"
    keywords: ["renal calculus", "kidney stone", "ureteric colic", "nephrolithiasis"]
    severity_rules:
      red_flags: ["anuria", "urosepsis", "intractable pain", "obstructed infected system"]
    procedures:
      - "URS + Laser lithotripsy (size/location dependent)"
      - "ESWL (selected cases)"
      - "PCNL (for larger renal stones)"
    recovery_recos:
      - "Hydration; strain urine if advised"
      - "Dietary modification based on stone type"
    cost_band:
      tier_1: [60000, 140000]
      tier_2: [45000, 110000]
      tier_3: [35000, 90000]

  - name: "Sinusitis (Acute/Chronic)"
    keywords: ["sinusitis", "maxillary sinusitis", "frontal sinusitis", "nasal polyps"]
    severity_rules:
      red_flags: ["orbital cellulitis", "intracranial spread", "meningitis"]
    procedures:
      - "Medical therapy (antibiotics, nasal steroids, saline irrigation)"
      - "FESS â€” Functional endoscopic sinus surgery (chronic/refractory)"
    recovery_recos:
      - "Steam inhalation, saline rinses"
      - "Allergen avoidance where possible"
    cost_band:
      tier_1: [3000, 15000]     # medical
      tier_2: [2000, 10000]
      tier_3: [1500, 8000]

  - name: "Cataract"
    keywords: ["cataract", "lens opacity", "phacoemulsification", "blurred vision elderly"]
    severity_rules:
      red_flags: ["rapid vision loss", "lens-induced glaucoma"]
    procedures:
      - "Phacoemulsification with IOL implantation"
    recovery_recos:
      - "Post-op drops as advised; protect eye"
      - "Avoid rubbing/strenuous activity briefly"
    cost_band:
      tier_1: [25000, 60000]
      tier_2: [18000, 45000]
      tier_3: [12000, 30000]

  - name: "Coronary Artery Disease / Suspected Angina"
    keywords: ["angina", "coronary artery disease", "cad", "ischemia", "mi history", "stemi", "nstemi", "treadmill positive"]
    severity_rules:
      red_flags: ["ongoing chest pain", "ecg changes", "elevated troponin", "hemodynamic instability"]
    procedures:
      - "Medical optimization (cardiology)"
      - "Coronary angiography Â± PCI (as indicated)"
      - "CABG in multi-vessel disease (as indicated)"
    recovery_recos:
      - "Risk-factor control (lipids, BP, diabetes), cardiac rehab"
      - "Lifestyle: diet, exercise, smoking cessation"
    cost_band:
      tier_1: [120000, 250000]   # diagnostic + PCI range varies widely
      tier_2: [90000, 200000]
      tier_3: [70000, 160000]

  - name: "Cesarean Section (Obstetric)"
    keywords: ["c section", "cesarean", "cesarean section", "lscs"]
    severity_rules:
      red_flags: ["placenta previa", "fetal distress", "obstructed labour", "preeclampsia severe"]
    procedures:
      - "Lower segment cesarean section (LSCS) â€” obstetrician-led"
    recovery_recos:
      - "Post-op ambulation as advised, wound care, breastfeeding support"
      - "Avoid heavy lifting for ~6 weeks"
    cost_band:
      tier_1: [70000, 140000]
      tier_2: [50000, 110000]
      tier_3: [35000, 80000]

  - name: "Tonsillitis / Recurrent Tonsillitis"
    keywords: ["tonsillitis", "recurrent sore throat", "tonsillar hypertrophy"]
    severity_rules:
      red_flags: ["peritonsillar abscess", "airway compromise"]
    procedures:
      - "Medical therapy (analgesics/antibiotics per clinician)"
      - "Tonsillectomy in recurrent/severe cases"
    recovery_recos:
      - "Warm saline gargles, hydration"
      - "Post-op soft diet if surgery done"
    cost_band:
      tier_1: [25000, 60000]
      tier_2: [18000, 45000]
      tier_3: [12000, 30000]

  - name: "Simple Fracture (Closed, Limb)"
    keywords: ["fracture", "closed fracture", "distal radius fracture", "tibia fracture", "fibula fracture"]
    severity_rules:
      red_flags: ["open fracture", "neurovascular deficit", "compartment syndrome"]
    procedures:
      - "Closed reduction & casting (selected)"
      - "ORIF â€” Open reduction internal fixation (as indicated)"
    recovery_recos:
      - "Elevation/ice early; physiotherapy after immobilization"
      - "Avoid weight bearing until cleared"
    cost_band:
      tier_1: [60000, 180000]
      tier_2: [45000, 140000]
      tier_3: [30000, 100000]

  - name: "Hemorrhoids / Piles"
    keywords: ["hemorrhoids", "piles", "anal cushions", "rectal bleeding bright red"]
    severity_rules:
      red_flags: ["profuse bleeding", "strangulated prolapse", "severe anemia"]
    procedures:
      - "Medical: fiber, topical therapy, banding"
      - "Minimally invasive hemorrhoidopexy/laser (selected)"
    recovery_recos:
      - "High-fiber diet, fluids"
      - "Sitz baths per advice"
    cost_band:
      tier_1: [15000, 60000]
      tier_2: [10000, 45000]
      tier_3: [7000, 30000]

---

## ðŸ’¾ **3. Enable Git LFS**

In Command Prompt:
```bash
cd D:\med_internship
git lfs install
git lfs track "*.pkl"
git add .gitattributes
git commit -m "Enable Git LFS for model files"
